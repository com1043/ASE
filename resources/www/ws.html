<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<script type="module">
import * as COMM from "./CommModule.mjs";
window.onload = function()
{
	console.log("loaded1");
	var commModule = new COMM.CommModule(function()
	{
		console.log("loaded3");
	});
	console.log("loaded2");
}

function WebSocketTest()
{

	if("WebSocket" in window)
	{
		
		// Let us open a web socket
		var ws = new WebSocket("ws://" + ip + ":8080");

		ws.onopen = function()
		{

			// Web Socket is connected, send data using send()
			ws.send("test");
		};

		ws.onmessage = function(evt)
		{
			var received_msg = evt.data;
		};

		ws.onclose = function()
		{

			// websocket is closed.
		};
	}
	else
	{

		// The browser doesn't support WebSocket
	}
}
		</script>
	</head>

	<body>
	
		<div id = "sse">
			<a href = "javascript:WebSocketTest()">Run WebSocket</a>
		</div>
		<div id = "test">Test div</div>
	</body>
</html>