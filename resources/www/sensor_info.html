<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>sensor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="image/logo_telco.png">
    <link type="text/css" rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    
    <script type="module">
                    //통신모듈
import * as COMM from './CommModule.js';





// 서버로부터 데이터를 받은 모듈
var commModule = new COMM.CommModule(function()
{
    console.log("commModule load");
    console.log(commModule.sessionUUID);

    var sensorListCh = commModule.createChannel("SensorListRequest",null, (e)=>
    {
        console.log("data:"+e.data);
        var data = JSON.parse(e.data);
        console.log(data);
        console.log(data.result);
        console.log(data.time);
        console.log(data.xg);
        console.log(data.yg);
        console.log(data.xa);
        console.log(data.za);
        console.log(data.al);
        
    });

    var sendSensorID = commModule.createChannel("RealtimeSensorDataRequest",()=>
	{
		sendSensorID.send("1001");
	}, (e)=>
	{
		console.log("data:"+e.data);
		
		var data = JSON.parse(e.data);
		console.log(data);
	});

    

    var sensorOnOffCh = commModule.createChannel("RealtimeAllSensorOnOffRequest",null, (e)=>
    {
        console.log(e.data);
    });
});
            window.onload = function()
            {
                
                
            }
        
    </script>
    
</head>

<body>
    <section class="sensor">
        <header>
            <div>
                <i class="fas fa-caret-square-left fa-2x back_btn" onclick="location.href='index.html'"></i>
                <div class="right_empty"></div>
                <span class="text2"><span id="state_name" class="text2_name"></span><span id="state"></span></span>
            </div>
        </header>
        <div></div>
        <div class="state">
            <div>
                <div class="graph_item">기울기</div>
                <label class="pos"> <span class="pos2">X</span> <span id="slopX"></span> <span class="unit">deg</span></label>
                <label class="pos"> <span class="pos2">Y</span> <span id="slopY" ></span> <span class="unit">deg</span></label>
            </div>
            <div>
                <div class="graph_item">가속도</div>
                <label class="pos"> <span class="pos2">X</span> <span id="accX"></span> <span class="unit">deg</span></label>
                <label class="pos"> <span class="pos2">Y</span> <span id="accY"></span> <span class="unit">mG</span></label>
                <label class="pos"> <span class="pos2">Z</span> <span id="accZ"></span> <span class="unit">mG</span></label>
            </div>
            <div>
                <div class="graph_item">고도</div>
                <label class="pos"> <span class="pos2">A</span> <span id="alti"></span> <span class="unit">M</span></label>
            </div>
            <div>
                <div class="graph_item">온도</div>
                <label class="pos"> <span class="pos2">T</span> <span id="temp"></span> <span class="unitT">˚</span></label>
            </div>
        </div>
        <hr/>
        <div>
            <div>데이터 수집 시간</div>
            <div id="uptime"></div>
        </div>
        <hr/>
    </section>
    <article>
        <div>센서 로그</div>
        <div id="log" class="logs"></div>
    </article>
</body>

</html>